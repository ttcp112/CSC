@model NSCSC.Shared.Models.CRM.Customers.CustomerBaseModels
@using NSCSC.Shared
@{ 
    var userSession = Session["User"] as NSCSC.Shared.Models.UserSession;
    var _CustomerID = Model.MerchantStore.CustomerID;
    var currencySymbol = "";
    if(userSession != null)
    {
        currencySymbol = userSession.CurrencySymbol;
    }

    var clsActive = "active";
    var clsIn = "in";
}

<div role="main" class="right_col">
    <div class="">
        <div class="page-title">
            <div class="title_left" style="padding: 10px 0px;">
                @Html.Partial("~/Views/Shared/_breadcrumb.cshtml",
                new Dictionary<string, string> { { "A", "CRM" }, { "B", "Customer" }, { "C", "Customer - View Detail" } })
            </div>
            <div class="clearfix"></div>
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12 x_panel">
                    <div class="x_content">
                        <div class="row text-right">
                            <ul class="header-buttons pull-right list-inline">
                                <li><a href="javascript:void(0)" onclick="CloseDetail(); return false;" class="btn btn-danger" id="btn-delete"><i class="fa fa-times"></i>&nbsp;Close</a></li>
                            </ul>
                        </div>

                        <div class="" role="tabpanel" data-example-id="togglable-tabs">
                            <ul id="myTab" class="nav nav-tabs bar_tabs" role="tablist">
                                <li role="presentation" class="@string.Format("{0}",Model.IndexTab== 1 ? clsActive : "")">
                                    <a href="#tab_content1" id="home-tab" role="tab" data-toggle="tab" aria-expanded="true">Customer Detail</a>
                                </li>
                                <li role="presentation" class="@string.Format("{0}",Model.IndexTab== 2 ? clsActive : "")">
                                    <a href="#tab_content2" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">Merchant & Stores</a>
                                </li>
                                <li role="presentation" class="@string.Format("{0}",Model.IndexTab== 3 ? clsActive : "")">
                                    <a href="#tab_content3" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">Products Management</a>
                                </li>
                            </ul>
                            <div id="myTabContent" class="tab-content">
                                @*Tab customer detail*@
                                <div role="tabpanel" class="tab-pane fade @string.Format("{0} {1}",Model.IndexTab== 1 ? clsActive : "", Model.IndexTab == 1 ? clsIn : "")" id="tab_content1" aria-labelledby="home-tab">
                                    <div class="box-body">

                                        <div class="row form-horizontal form-label-left" style="margin-bottom:15px;">

                                            <div class="form-group">
                                                <div class="col-md-offset-1 col-md-3 col-sm-3 col-xs-12">
                                                    <div class="form-group text-center">
                                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                                            @if (!string.IsNullOrEmpty(Model.CustomerDetail.ImageURL))
                                                            {
                                                                <img id="upload-preview" src="@Model.CustomerDetail.ImageURL" height="200" width="200" class="" />
                                                            }
                                                            else
                                                            {
                                                                <img id="upload-preview" class="" src="@Commons.Image200_200" height="200" width="200" />
                                                            }
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-8 col-sm-8 col-xs-12">
                                                    @*Name*@
                                                    <div class="form-group">
                                                        <label class="col-md-1 col-sm-2 col-xs-12  fontLighter">Name</label>
                                                        <div class="col-md-7 col-sm-12 col-xs-12">
                                                            @Model.CustomerDetail.Name
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        @*Phone*@
                                                        <label class="col-md-1 col-sm-2 col-xs-12  fontLighter">Phone</label>
                                                        <div class="col-md-3 col-sm-6 col-xs-12" id="txtPhone">
                                                            @Model.CustomerDetail.Phone
                                                        </div>
                                                        @*Email*@
                                                        <label class="control-label col-md-1 col-sm-2 col-xs-12  fontLighter">Email</label>
                                                        <div class="col-md-3 col-sm-6 col-xs-12" id="txtEmail">
                                                            @Model.CustomerDetail.Email
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        @*Status*@
                                                        <label class="col-md-1 col-sm-2 col-xs-12  fontLighter">Active</label>
                                                        <div class="col-md-2 col-sm-6 col-xs-12">
                                                            @string.Format("{0}", Model.CustomerDetail.IsActive ? "Yes" : "No")
                                                        </div>
                                                        @*Marital Status*@
                                                        <label class="control-label col-md-2 col-sm-2 col-xs-12 fontLighter">Marital Status</label>
                                                        <div class="col-md-3 col-sm-6 col-xs-12">
                                                            @if (Model.CustomerDetail.MaritalStatus)
                                                            {
                                                                @:Married
                                                            }
                                                            else
                                                            {
                                                                @:Single
                                                            }
                                                        </div>
                                                    </div>

                                                    @*Gender*@
                                                    <div class="form-group">
                                                        <label for="" class="col-md-1 col-sm-2 col-xs-12  fontLighter">Gender</label>
                                                        <div class="col-md-2 col-sm-6 col-xs-12">
                                                            @string.Format("{0}", Model.CustomerDetail.Gender ? "Male" : "Female")
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                            @*=====================================*@
                                            <div class="form-group">
                                                @*NRIC*@
                                                <label for="" class="col-md-offset-1 col-md-1 col-sm-12 col-xs-12  fontLighter">NRIC</label>
                                                <div class="col-md-3 col-sm-3 col-xs-12" id="txtNRIC">
                                                    @Model.CustomerDetail.NRIC
                                                </div>
                                                @*Joined data*@
                                                <label for="" class="col-md-1 col-sm-12 col-xs-12   fontLighter">Joined date</label>
                                                <div class="col-md-2 col-sm-6 col-xs-12">
                                                    @Model.CustomerDetail.JoinedDate.ToString(Commons.FormatDate)
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                @*Birthday*@
                                                <label for="" class="col-md-offset-1 col-md-1 col-sm-12 col-xs-12  fontLighter">Birthday</label>
                                                <div class="col-md-3 col-sm-3 col-xs-12">
                                                    @Model.CustomerDetail.Birthday.ToString(Commons.FormatDate)

                                                </div>
                                                @*Anniversary*@
                                                <label for="" class="col-md-1 col-sm-12 col-xs-12   fontLighter">Anniversary</label>
                                                <div class="col-md-2 col-sm-6 col-xs-12">
                                                    @Model.CustomerDetail.Anniversary.ToString(Commons.FormatDate)
                                                </div>
                                            </div>

                                            @*Home Address*@
                                            <div class="form-group">
                                                <label for="" class="col-md-offset-1 col-md-2 col-sm-12 col-xs-12">Home Address</label>
                                                <div class="col-md-5 col-sm-6 col-xs-12 topDotBorder">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                @*Street*@
                                                <label for="" class="col-md-offset-1 col-md-1 col-sm-12 col-xs-12   fontLighter">Street</label>
                                                <div class="col-md-3 col-sm-3 col-xs-12">
                                                    @Model.CustomerDetail.HomeStreet
                                                </div>
                                                @*City*@
                                                <label for="" class="col-md-1 col-sm-12 col-xs-12   fontLighter">City</label>
                                                <div class="col-md-2 col-sm-3 col-xs-12">
                                                    @Model.CustomerDetail.HomeCity
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                @*Country*@
                                                <label for="" class="col-md-offset-1 col-md-1 col-sm-12 col-xs-12   fontLighter">Country</label>
                                                <div class="col-md-3 col-sm-3 col-xs-12">
                                                    @Model.CustomerDetail.HomeCountry
                                                </div>
                                                @*ZIP Code*@
                                                <label for="" class="col-md-1 col-sm-12 col-xs-12   fontLighter">ZIP Code</label>
                                                <div class="col-md-2 col-sm-3 col-xs-12">
                                                    @Model.CustomerDetail.HomeZipCode
                                                </div>
                                            </div>

                                            @*Office Address*@
                                            <div class="form-group">
                                                <label for="" class="col-md-offset-1 col-md-2 col-sm-12 col-xs-12">Office Address</label>
                                                <div class="col-md-5 col-sm-6 col-xs-12 topDotBorder">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                @*Street*@
                                                <label for="" class="col-md-offset-1 col-md-1 col-sm-12 col-xs-12   fontLighter">Street</label>
                                                <div class="col-md-3 col-sm-3 col-xs-12">
                                                    @Model.CustomerDetail.OfficeStreet
                                                </div>
                                                @*City*@
                                                <label for="" class="col-md-1 col-sm-12 col-xs-12  fontLighter">City</label>
                                                <div class="col-md-2 col-sm-3 col-xs-12">
                                                    @Model.CustomerDetail.OfficeCity
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                @*Country*@
                                                <label for="" class="col-md-offset-1 col-md-1 col-sm-12 col-xs-12   fontLighter">Country</label>
                                                <div class="col-md-3 col-sm-3 col-xs-12">
                                                    @Model.CustomerDetail.OfficeCountry
                                                </div>
                                                @*ZIP Code*@
                                                <label for="" class="col-md-1 col-sm-12 col-xs-12   fontLighter">ZIP Code</label>
                                                <div class="col-md-2 col-sm-3 col-xs-12">
                                                    @Model.CustomerDetail.OfficeZipCode
                                                </div>
                                            </div>

                                            @*Applicable Products*@
                                            <div class="form-group">
                                                <label for="" class="col-md-offset-1 col-md-2 col-sm-12 col-xs-12" style="color:#cc1018; font-size:17px;">Applicable Products</label>
                                                <div class="col-md-5 col-sm-6 col-xs-12 topDotBorder">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-md-offset-1 col-md-7 col-sm-12 col-xs-12" id="div-applicable-product">
                                                    <table id="datatable-responsive-list-applicable-product" class="table table-striped table-bordered dt-responsive nowrap table table-striped jambo_table bulk_action" cellspacing="0" style="width:100%;">
                                                        <thead style="background-color:#34495e; color:#fff;">
                                                            <tr>
                                                                <th>Product Name</th>
                                                                <th style="text-align: center;">Price</th>
                                                                <th style="text-align: center;">Active</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="tr-add-more-tab-applicable-product">
                                                            @if (Model != null && Model.CustomerDetail != null && Model.CustomerDetail.ListProduct != null && Model.CustomerDetail.ListProduct.Any())
                                                            {
                                                                for (int i = 0; i < Model.CustomerDetail.ListProduct.Count; i++)
                                                                {
                                                                    <tr class="ng-Product" id="tr_add_product_@Model.CustomerDetail.ListProduct[i].OffSet" data-value="@Model.CustomerDetail.ListProduct[i].OffSet"
                                                                        style="@string.Format("display:{0}", Model.CustomerDetail.ListProduct[i].Status != (int)Commons.EStatus.Deleted ? "table-row" : "none");">
                                                                        <td class="">
                                                                            <span id="lblnameperiodtype_@Model.CustomerDetail.ListProduct[i].OffSet">@Model.CustomerDetail.ListProduct[i].Name</span>
                                                                        </td>
                                                                        <td class="text-center">

                                                                            <button class="btn btn-default" type="button" onclick="ShowModalProductPrice(this, '@Model.CustomerDetail.ListProduct[i].ID')">List Price</button>
                                                                            <a id="lblprice_@Model.CustomerDetail.ListProduct[i].OffSet"></a>
                                                                        </td>
                                                                        <td class="text-center">
                                                                            <!--set value for modal pass attribute [data] -->
                                                                            <a href="javascript:void(0)" class="btn btn-danger btn-xs delete details" onclick="DeleteProduct('@Model.CustomerDetail.ListProduct[i].OffSet', '@Model.CustomerDetail.ListProduct[i].ID'); return false;">
                                                                                <i class="fa fa-trash-o"></i>
                                                                            </a>
                                                                            @*Popup Price Items*@
                                                                            <div class="modal fade" id="modalDish" tabindex="-1" role="dialog" aria-labelledby="modalDishLabel" data-backdrop="static" data-keyboard="false" style="clear: both">
                                                                                <div class="modal-dialog" role="document">
                                                                                    <div class="modal-content">
                                                                                        <div class="modal-header" style="text-align: left">
                                                                                            <button type="button" class="close" data-dismiss="modal">
                                                                                                <span aria-hidden="true">×</span>
                                                                                            </button>
                                                                                            <h4 class="modal-title" id="mymodalTitle">Price Info</h4>
                                                                                        </div>
                                                                                        <div class="modal-body scroll popupTabConent-@Model.CustomerDetail.ListProduct[i].OffSet" style="text-align: left !important">
                                                                                            <div class="form-group-sm">
                                                                                                <table id="table-list-choose-price_@Model.CustomerDetail.ListProduct[i].OffSet" class="table table-striped table-bordered dt-responsive nowrap table table-striped jambo_table bulk_action cls-table-list-choose-price" cellspacing="0" style="width:100%;">
                                                                                                    <thead>
                                                                                                        <tr style="background-color:#34495e; color:#fff;">
                                                                                                            <th style="text-align: left">Period</th>
                                                                                                            <th style="text-align: left">Price</th>
                                                                                                            <th style="text-align: center"></th>

                                                                                                        </tr>
                                                                                                    </thead>
                                                                                                    <tbody id="list-data-choose-price_@Model.CustomerDetail.ListProduct[i].OffSet">
                                                                                                        @if (Model.CustomerDetail.ListProduct[i].ListPrice != null && Model.CustomerDetail.ListProduct[i].ListPrice.Count > 0)
                                                                                                        {
                                                                                                            for (int j = 0; j < Model.CustomerDetail.ListProduct[i].ListPrice.Count; j++)
                                                                                                            {
                                                                                                                @Html.Partial("_ItemPrice", Model.CustomerDetail.ListProduct[i].ListPrice[j])
                                                                                                            }
                                                                                                        }
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="modal-footer">                                                                                            
                                                                                            <div class="form-group" style="margin-top: 12px; ">
                                                                                                <span></span>
                                                                                                <button type="button" class="btn btn-success" data-dismiss="modal">Close</button>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            }
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="form-group" style="padding:20px 0;">
                                            </div>

                                            @*Receipt History*@
                                            <div class="form-group">
                                                <label for="" class="col-md-offset-1 col-md-2 col-sm-12 col-xs-12" style="color:#cc1018; font-size:17px;">Receipt History</label>
                                                <div class="col-md-5 col-sm-6 col-xs-12 topDotBorder">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-md-offset-1 col-md-7 col-sm-12 col-xs-12">
                                                    <table id="datatable-responsive-list-receipt-history" class="table table-striped table-bordered dt-responsive nowrap table table-striped jambo_table bulk_action"
                                                           cellspacing="0" style="width:100%;">
                                                        <thead style="background-color:#34495e; color:#fff;">
                                                            <tr>
                                                                <th class="text-center">Receipt No.</th>
                                                                <th class="text-center">Paid Time</th>
                                                                <th class="text-center">Total</th>
                                                                <th class="text-center">Paid by</th>
                                                                <th class="text-center">Status</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="list-item-cate">
                                                            @if (Model.CustomerDetail != null && Model.CustomerDetail.ListReceipt != null && Model.CustomerDetail.ListReceipt.Any())
                                                            {
                                                                foreach (var item in Model.CustomerDetail.ListReceipt)
                                                                {
                                                                    <tr>
                                                                        <td class="text-center"><a href="javascript:void(0)" onclick="showreceiptdetail('@item.ID')">@item.ReceiptNo</a></td>
                                                                        <td class="text-center">@item.PaidTime.ToString(Commons.FormatDateTime)</td>
                                                                        <td class="text-center">@currencySymbol @item.Total.ToString("#,0.00")</td>
                                                                        <td class="text-center">
                                                                            @string.Join(",", item.PaidByMethod)
                                                                        </td>
                                                                        <td class="text-center">
                                                                            @{
                                                                                var StatusName = "";
                                                                            }
                                                                            @if (item.OrderStatus == (int)Commons.EOrderStatus.Completed)
                                                                            {
                                                                                StatusName = Commons.EOrderStatus.Completed.ToString();
                                                                            }
                                                                            else if (item.OrderStatus == (int)Commons.EOrderStatus.Full_Refunded)
                                                                            {
                                                                                StatusName = Commons.EOrderStatus.Full_Refunded.ToString();
                                                                            }
                                                                            else
                                                                            {
                                                                                StatusName = Commons.EOrderStatus.Half_Refunded.ToString();
                                                                            }
                                                                            @StatusName
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            }
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="form-group" style="padding:20px 0;">
                                            </div>
                                        </div>

                                        @*Receipt Detail*@
                                        <div class="modal fade" id="modelDetail" tabindex="-1" role="dialog" aria-hidden="true">
                                            <div class="modal-dialog modal-lg">
                                                <div class="modal-content">
                                                    <div class="modal-body scroll" style="padding:0;">
                                                        <div id="tbl-listDetail" style="padding:15px;">
                                                            <div class="row form-horizontal form-label-left">
                                                                <div class="modal-header" style="background-color:#f9f9f9">                                                                 
                                                                    <h4 class="modal-title" style="text-align: left;font-weight:bolder">RECEIPT DETAIL</h4>
                                                                </div>
                                                                <div class="receiptdetail">
                                                                </div>
                                                            </div>
                                                            <div class="row text-right">
                                                                <ul class="header-buttons pull-right list-inline">
                                                                    <li><a href="javascript:void(0)" data-dismiss="modal" class="btn btn-sm btn-danger" id="btn-delete"><i class="fa fa-times"></i>&nbsp;Cancel</a></li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                @*Tab Marchant & Stores*@
                                <div role="tabpanel" class="tab-pane fade @string.Format("{0} {1}",Model.IndexTab== 2 ? clsActive : "", Model.IndexTab == 2 ? clsIn : "")" id="tab_content2" aria-labelledby="profile-tab">
                                    <div class="box-body">

                                        <div class="row form-horizontal form-label-left" style="margin-bottom:15px;">

                                            <div class="form-group">
                                                <div class="col-md-offset-1 col-md-3 col-sm-3 col-xs-12">
                                                    <div class="form-group text-center">
                                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                                            @if (!string.IsNullOrEmpty(Model.MerchantStore.ImageURL))
                                                            {
                                                            <img id="upload-preview" src="@Model.MerchantStore.ImageURL" height="200" width="200" class="" />
                                                            }
                                                            else
                                                            {
                                                            <img id="upload-preview" class="" src="@Commons.Image200_200" height="200" width="200" />
                                                            }
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-8 col-sm-8 col-xs-12">
                                                    @*Name*@
                                                    <div class="form-group">
                                                        <label class="col-md-2 col-sm-2 col-xs-12  fontLighter">Name</label>
                                                        <div class="col-md-6 col-sm-12 col-xs-12">
                                                            @Model.MerchantStore.Name
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        @*Email*@
                                                        <label class="col-md-2 col-sm-2 col-xs-12  fontLighter">Email</label>
                                                        <div class="col-md-6 col-sm-12 col-xs-12">
                                                            @Model.MerchantStore.Email
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @*Phone*@
                                                        <label class="col-md-2 col-sm-2 col-xs-12  fontLighter">Phone</label>
                                                        <div class="col-md-6 col-sm-12 col-xs-12">
                                                            @Model.MerchantStore.Phone
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @*GST Reg No*@
                                                        <label class="col-md-2 col-sm-2 col-xs-12  fontLighter">GST Reg No</label>
                                                        <div class="col-md-6 col-sm-12 col-xs-12">
                                                            @Model.MerchantStore.GSTRegNo
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        @*Create Date*@
                                                        <label class="col-md-2 col-sm-2 col-xs-12  fontLighter">Created Date</label>
                                                        <div class="col-md-6 col-sm-12 col-xs-12">
                                                            @Model.MerchantStore.CreatedDate.ToString(Commons.FormatDate)
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                            @*Home Address*@
                                            <div class="form-group">
                                                <label for="" class="col-md-offset-1 col-md-2 col-sm-12 col-xs-12">Home Address</label>
                                                <div class="col-md-5 col-sm-6 col-xs-12 topDotBorder">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                @*Street*@
                                                <label for="" class="col-md-offset-1 col-md-1 col-sm-12 col-xs-12   fontLighter">Street</label>
                                                <div class="col-md-3 col-sm-3 col-xs-12">
                                                    @Model.MerchantStore.Street
                                                </div>
                                                @*City*@
                                                <label for="" class="col-md-1 col-sm-12 col-xs-12   fontLighter">City</label>
                                                <div class="col-md-2 col-sm-3 col-xs-12">
                                                    @Model.MerchantStore.City
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                @*Country*@
                                                <label for="" class="col-md-offset-1 col-md-1 col-sm-12 col-xs-12   fontLighter">Country</label>
                                                <div class="col-md-3 col-sm-3 col-xs-12">
                                                    @Model.MerchantStore.Country
                                                </div>
                                                @*ZIP Code*@
                                                <label for="" class="col-md-1 col-sm-12 col-xs-12   fontLighter">ZIP Code</label>
                                                <div class="col-md-2 col-sm-3 col-xs-12">
                                                    @Model.MerchantStore.ZipCode
                                                </div>
                                            </div>

                                            @*Store Info*@
                                            <div class="form-group">
                                                <label for="" class="col-md-offset-1 col-md-2 col-sm-12 col-xs-12" style="color:#cc1018; font-size:17px;">Store Info</label>
                                                <div class="col-md-5 col-sm-6 col-xs-12 topDotBorder">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-md-offset-1 col-md-7 col-sm-12 col-xs-12">
                                                    <table id="datatable-responsive-list-store-info" class="table table-striped table-bordered dt-responsive nowrap table table-striped jambo_table bulk_action"
                                                           cellspacing="0" style="width:100%;">
                                                        <thead style="background-color:#34495e; color:#fff;">
                                                            <tr>
                                                                <th class="text-center">Store Name</th>
                                                                <th class="text-center">Expiry Time</th>
                                                                <th class="text-center">Link App Store</th>
                                                                <th class="text-center">Active</th>
                                                                <th class="text-center">Action</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="list-item-cate">
                                                            @if (Model.MerchantStore != null && Model.MerchantStore.ListStore != null && Model.MerchantStore.ListStore.Any())
                                                            {
                                                                foreach (var itemMerchant in Model.MerchantStore.ListStore)
                                                                {
                                                                    <tr>
                                                                        <td class="text-center">@itemMerchant.Name</td>
                                                                        <td class="text-center">@string.Format("{0}",itemMerchant.ExpiredDate.HasValue ? itemMerchant.ExpiredDate.Value.ToString(Commons.FormatDateTime) : "")</td>
                                                                        <td class="text-center">No</td>
                                                                        <td class="text-center">@string.Format("{0}", itemMerchant.IsActive ? "Yes" : "No")</td>
                                                                        <td>
                                                                            <a href="javascript:void(0)"
                                                                               onclick="ShowView('@Url.Action("ViewStore", "CRMCustomers", new { StoreId = itemMerchant.ID, CustomerID = Model.MerchantStore.CustomerID })')" class="btn btn-primary btn-xs view details">
                                                                                <i class="fa fa-eye"></i>&nbsp;View
                                                                            </a>
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            }
      
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                @*Tab Products Management*@
                                <div role="tabpanel" class="tab-pane fade @string.Format("{0} {1}",Model.IndexTab== 3 ? clsActive : "", Model.IndexTab == 3 ? clsIn : "")" id="tab_content3" aria-labelledby="profile-tab">
                                    <div class="row form-horizontal form-label-left" style="margin-bottom:15px;">
                                        @*Hardwares and Services Management*@
                                        <div class="form-group">
                                            <label for="" class="col-md-3 col-sm-12 col-xs-12" style="font-size:15px;">Hardwares and Services Management</label>
                                            <div class="col-md-9 col-sm-6 col-xs-12 topDotBorder">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                <table id="datatable-responsive-list-hardwares-and-services"
                                                       class="table table-striped table-bordered dt-responsive nowrap table table-striped jambo_table bulk_action"
                                                       cellspacing="0" style="width:100%;">
                                                    <thead style="background-color:#34495e; color:#fff;">
                                                        <tr>
                                                            <th class="text-center">Item</th>
                                                            <th class="text-center">Type</th>
                                                            <th class="text-center">Bought - Time</th>
                                                            <th class="text-center">Serial No.</th>
                                                            <th class="text-center">Receipt No.</th>
                                                            <th class="text-center">Status</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="list-item-hardwares-and-services">

                                                        @if (Model.ProductManagement.ListHardwareService != null && Model.ProductManagement.ListHardwareService.Count > 0)
                                                        {
                                                            foreach (var item in Model.ProductManagement.ListHardwareService)
                                                            {
                                                                <tr>
                                                                    <td>@item.ItemName</td>
                                                                    <td>@item.sAdditionType</td>
                                                                    <td>@item.BoughtTime.Value.ToString(Commons.FormatDateTime)</td>
                                                                    <td>@item.SerialNo</td>
                                                                    <td>@item.ReceiptNo</td>
                                                                    <td>@item.Status</td>
                                                                </tr>
                                                            }
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="form-group" style="padding:20px 0;">
                                        </div>

                                        @*Products and Packages Management*@
                                        <div class="form-group">
                                            <label for="" class="col-md-3 col-sm-12 col-xs-12" style="font-size:15px;">Products and Packages Management</label>
                                            <div class="col-md-9 col-sm-6 col-xs-12 topDotBorder">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                <table id="datatable-responsive-list-products-and-packages"
                                                       class="table table-striped table-bordered dt-responsive nowrap table table-striped jambo_table bulk_action"
                                                       cellspacing="0" style="width:100%;">
                                                    <thead style="background-color:#34495e; color:#fff;">
                                                        <tr>
                                                            <th class="text-center">Item</th>
                                                            <th class="text-center">Type</th>
                                                            <th class="text-center">Bought - Time</th>
                                                            <th class="text-center">Activate - Time</th>
                                                            <th class="text-center">Expiry Date</th>
                                                            <th class="text-center">Receipt No.</th>
                                                            <th class="text-center">Status</th>
                                                            <th class="text-center">Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="list-item-products-and-packages">
                                                        @if (Model.ProductManagement.ListProductPackage != null && Model.ProductManagement.ListProductPackage.Count > 0)
                                                        {
                                                            foreach (var item in Model.ProductManagement.ListProductPackage)
                                                            {
                                                                <tr>
                                                                    <td>@item.ItemName</td>
                                                                    <td>@item.sType</td>
                                                                    <td>@item.BoughtTime.Value.ToString(Commons.FormatDateTime)</td>
                                                                    <td>@item.sActivateTime</td>
                                                                    <td>@item.sExpiryDate</td>
                                                                    <td>@item.ReceiptNo</td>
                                                                    <td>@item.Status</td>
                                                                    <td>
                                                                        @if (item.Status.Equals(Commons.EStatusAccountFunction.Active.ToString()))
                                                                        {
                                                                            <a href="javascript:void(0)" class="btn btn-xs btn-success" data-toggle="modal"
                                                                               data-backdrop="static" onclick="ShowDetailProductPackageMana('@item.AssetID','@Model.CustomerDetail.ID')">
                                                                                <i class="fa fa-pie-chart"></i>&nbsp;Detail
                                                                            </a>
                                                                        }
                                                                        else if (item.Status.Equals(Commons.EStatusAccountFunction.Inactive.ToString()))
                                                                        {
                                                                            <a href="javascript:void(0)" class="btn btn-xs btn-success" data-toggle="modal"
                                                                               data-backdrop="static" onclick="ShowDetailProductPackageMana('@item.AssetID','@Model.CustomerDetail.ID')">
                                                                                <i class="fa fa-pie-chart"></i>&nbsp;Detail
                                                                            </a>
                                                                        }
                                                                        else if (item.Status.Equals(Commons.EStatusAccountFunction.Expired.ToString()))
                                                                        {
                                                                            <a href="javascript:void(0)" class="btn btn-xs btn-success" data-toggle="modal"
                                                                               data-backdrop="static" onclick="ShowDetailProductPackageMana('@item.AssetID','@Model.CustomerDetail.ID')">
                                                                                <i class="fa fa-pie-chart"></i>&nbsp;Detail
                                                                            </a>
                                                                        }
                                                                    </td>
                                                                </tr>

                                                            }
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="form-group" style="padding:20px 0;">
                                        </div>

                                        @*Accounts Management*@
                                        <div class="form-group">
                                            <label for="" class="col-md-3 col-sm-12 col-xs-12" style="font-size:15px;">Accounts Management</label>
                                            <div class="col-md-9 col-sm-6 col-xs-12 topDotBorder">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                <table id="datatable-responsive-list-accounts"
                                                       class="table table-striped table-bordered dt-responsive nowrap table table-striped jambo_table bulk_action"
                                                       cellspacing="0" style="width:100%;">
                                                    <thead style="background-color:#34495e; color:#fff;">
                                                        <tr>
                                                            <th class="text-center">Account</th>
                                                            <th class="text-center">License Key</th>
                                                            <th class="text-center">Activate Time</th>
                                                            <th class="text-center">Expiry Date</th>
                                                            <th class="text-center">Status</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="list-item-accounts">
                                                        @if (Model.ProductManagement.ListAccount != null && Model.ProductManagement.ListAccount.Count > 0)
                                                        {
                                                            foreach (var item in Model.ProductManagement.ListAccount)
                                                            {
                                                                <tr>
                                                                    <td>@item.Account</td>
                                                                    <td>@item.LicenseKey</td>
                                                                    <td>@item.sActivateTime</td>
                                                                    <td>@item.sExpiryDate</td>
                                                                    <td>@item.Status</td>
                                                                </tr>
                                                            }
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="form-group" style="padding:20px 0;">
                                        </div>

                                        @*Additional Functions Management*@
                                        <div class="form-group">
                                            <label for="" class="col-md-3 col-sm-12 col-xs-12" style="font-size:15px;">Additional Functions Management</label>
                                            <div class="col-md-9 col-sm-6 col-xs-12 topDotBorder">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                <table id="datatable-responsive-list-additional-functions"
                                                       class="table table-striped table-bordered dt-responsive nowrap table table-striped jambo_table bulk_action"
                                                       cellspacing="0" style="width:100%;">
                                                    <thead style="background-color:#34495e; color:#fff;">
                                                        <tr>
                                                            <th class="text-center">Function</th>
                                                            <th class="text-center">License Key</th>
                                                            <th class="text-center">Parent License Key</th>
                                                            <th class="text-center">Activate Time</th>
                                                            <th class="text-center">Expiry Date</th>
                                                            <th class="text-center">Status</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="list-item-additional-functions">
                                                        @if (Model.ProductManagement.ListFunction != null && Model.ProductManagement.ListFunction.Count > 0)
                                                        {
                                                            int index = 0;
                                                            foreach (var item in Model.ProductManagement.ListFunction)
                                                            {
                                                                <tr>
                                                                    <td>@item.FunctionName</td>
                                                                    <td>@item.LicenseKey</td>
                                                                    <td>@item.ParentLicenseKey</td>
                                                                    <td>@item.sActivateTime</td>
                                                                    <td>@item.sExpiryDate</td>
                                                                    <td>@item.Status</td>
                                                                </tr>

                                                                index++;
                                                            }
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="form-group" style="padding:20px 0;">
                                        </div>

                                    </div>

                                    @*Hardwares and Services Management*@
                                    @*Modal Device Serial Number*@
                                    <div id="modal-device-serial-number" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog">
                                        <div class="modal-dialog modal-sm">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h4 class="modal-title" id="myModalLabel2" style="text-align: left">Device Serial Number</h4>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="form-group">
                                                        <label for="serial-number" class="control-label">Serial Number:</label>
                                                        <input type="text" class="form-control" id="txtSerialNumber" placeholder="Input serial number">
                                                        <label class="label label-danger" id="lblErrorConfirn"></label>
                                                        <input type="hidden" id="txtAssetId" />
                                                        <input type="hidden" id="txtState" />
                                                        <input type="hidden" id="txtItemId" />
                                                        <input type="hidden" id="CustomerId" />
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-danger" @*data-dismiss="modal"*@ onclick="CloseModalComfirn(); return false;">Cancel</button>
                                                    <button type="button" class="btn btn-primary" onclick="ComfirnSerialNumber(); return false;">Confirm</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    @*End Hardwares and Services Management*@

                                    @*Products and Packages Management*@

                                    @*======== Extend*@
                                    @*Extend Product*@
                                    <div class="modal fade" id="modelExtendProduct" tabindex="-1" role="dialog" aria-hidden="true">
                                        <div class="modal-dialog modal-lg">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                    <h4 class="modal-title" id="myModalLabel">Extend Product</h4>
                                                </div>
                                                <div class="modal-body scroll" style="padding:0;">
                                                    <div id="tbl-listDetail" style="padding:15px;">

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    @*Check Out*@
                                    <div class="modal fade" id="modelCheckOut" tabindex="-1" role="dialog" aria-hidden="true">
                                        <div class="modal-dialog modal-lg">
                                            <div class="modal-content">
                                                <div class="modal-body scroll" style="padding:0;">
                                                    <div id="tbl-listDetail" style="padding:15px;">
                                                        <div class="form-group" style="font-size:30px;">
                                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                            <div class="col-md-12 col-sm-12 col-xs-12" style="color:#cc1018">Check Out - Make Payment</div>
                                                        </div>

                                                        <div class="form-group  text-right">
                                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                                <button class="btn btn-sm btn-danger" type="button" data-dismiss="modal"><i class="fa fa-times"></i>&nbsp;Cancel</button>
                                                                <a href="javascript:void(0)" class="btn btn-sm btn-success" id="btn-done" data-toggle="modal"
                                                                   data-backdrop="static" data-target="#modalExtendConfirmation">
                                                                    <i class="fa fa-pie-chart"></i>&nbsp;Done
                                                                </a>

                                                            </div>
                                                        </div>

                                                        <div class="row form-horizontal form-label-left">
                                                            <div class="form-group">
                                                                <label for="" class="col-md-4 col-sm-12 col-xs-12" style="font-size:20px;">Customer Information</label>
                                                                <div class="col-md-8 col-sm-12 col-xs-12 topDotBorder">
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <div class="col-md-2 col-sm-12 col-xs-12">
                                                                    <img src="http://placehold.it/150x150" />
                                                                </div>
                                                                <div class="col-md-10 col-sm-12 col-xs-12">
                                                                    <div class="form-group">
                                                                        <div class="col-md-12 col-sm-12 col-xs-12">Customer: Jason</div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <div class="col-md-12 col-sm-12 col-xs-12">Email: jason@hotmail.com</div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <div class="col-md-12 col-sm-12 col-xs-12">Phone: 0123456789</div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <div class="col-md-12 col-sm-12 col-xs-12">Merchant: ABC Bakery</div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label for="" class="col-md-2 col-sm-12 col-xs-12" style="font-size:20px;">Check Out</label>
                                                                <div class="col-md-10 col-sm-12 col-xs-12 topDotBorder">
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="" class="col-md-2 col-sm-12 col-xs-12" style="font-size:25px; color:#cc1018">OR00001</label>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="col-md-3 col-sm-12 col-xs-12">Sub Total</div>
                                                                <div class="col-md-9 col-sm-12 col-xs-12">$1200.00</div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="col-md-3 col-sm-12 col-xs-12">Tax (Add on - 10%)</div>
                                                                <div class="col-md-9 col-sm-12 col-xs-12">$0.00</div>
                                                            </div>

                                                            <div class="form-group">
                                                                <div class="col-md-6 col-sm-12 col-xs-12">
                                                                    <div class="form-group">
                                                                        <div class="col-md-6 col-sm-12 col-xs-12 font-bold" style="color:#cc1018; font-size:15px;">Total</div>
                                                                        <div class="col-md-6 col-sm-12 col-xs-12 font-bold" style="color:#cc1018; font-size:15px;">$1200.00</div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <div class="col-md-6 col-sm-12 col-xs-12">Received</div>
                                                                        <div class="col-md-6 col-sm-12 col-xs-12">$850.00</div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <div class="col-md-6 col-sm-12 col-xs-12">Remaining</div>
                                                                        <div class="col-md-6 col-sm-12 col-xs-12">$350.00</div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <div class="col-md-6 col-sm-12 col-xs-12">Change</div>
                                                                        <div class="col-md-6 col-sm-12 col-xs-12">$0.00</div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-6 col-sm-12 col-xs-12">
                                                                    <textarea class="form-control" rows="5">Note</textarea>
                                                                </div>
                                                            </div>

                                                            <div class="box-body form-group" style="text-align:center; padding-bottom:30px;">
                                                                <div class="col-md-6 col-sm-12 col-xs-12">
                                                                    <table class="table">
                                                                        <thead style="background-color:#134F5C; color:#fff;">
                                                                            <tr>
                                                                                <td class="text-left">Payment Summary</td>
                                                                                <td style="width:20%;">
                                                                                    <button class="btn btn-xs btn-danger" style="color:#fff;">RESET</button>
                                                                                </td>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr class="paddingTop30 font-bold">
                                                                                <td class="text-left paddingLeftCustomer">Type</td>
                                                                                <td class="text-left">Amount</td>
                                                                            </tr>
                                                                            <tr class="paddingTop30">
                                                                                <td class="text-left paddingLeftCustomer">Visa</td>
                                                                                <td class="text-left">$30.00</td>
                                                                            </tr>
                                                                            <tr class="paddingTop30">
                                                                                <td class="text-left paddingLeftCustomer">Cash</td>
                                                                                <td class="text-left">$820.00</td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>

                                                                <div class="col-md-6 col-sm-12 col-xs-12">
                                                                    <table class="table">
                                                                        <thead style="background-color:#134F5C; color:#fff;">
                                                                            <tr>
                                                                                <td class="text-left">Pay by</td>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr class="paddingTop30">
                                                                                <td class="text-left paddingLeftCustomer">
                                                                                    <div class="form-group">
                                                                                        <div class="col-md-3 col-sm-12 col-xs-12 lineHeight">Amount</div>
                                                                                        <div class="col-md-6 col-sm-12 col-xs-12">
                                                                                            <input type="text" value="$820.00" class="form-control" />
                                                                                        </div>
                                                                                        <div class="col-md-3 col-sm-12 col-xs-12 lineHeight">
                                                                                            <button class="btn btn-md btn-primary">Add</button>
                                                                                        </div>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                            <tr class="paddingTop30">
                                                                                <td class="text-left paddingLeftCustomer">
                                                                                    <input type="checkbox" class="flat" checked /> <img src="@Url.Content("~/Assets/Images/visa.png")" alt="Visa"> Cash
                                                                                </td>
                                                                            </tr>
                                                                            <tr class="paddingTop30">
                                                                                <td class="text-left paddingLeftCustomer">
                                                                                    <input type="checkbox" class="flat" /> <img src="@Url.Content("~/Assets/Images/mastercard.png")" alt="Mastercard"> Credit Card
                                                                                </td>
                                                                            </tr>
                                                                            <tr class="paddingTop30">
                                                                                <td class="" style="padding:10px 0;">
                                                                                    <div class="col-xs-12">
                                                                                        <img src="@Url.Content("~/Assets/Images/visa.png")" alt="Visa">
                                                                                        <img src="@Url.Content("~/Assets/Images/mastercard.png")" alt="Mastercard">
                                                                                        <img src="@Url.Content("~/Assets/Images/american-express.png")" alt="American Express">
                                                                                        <img src="@Url.Content("~/Assets/Images/paypal.png")" alt="Paypal">
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>

                                                            </div>

                                                        </div>
                                                        <div class="row text-right">
                                                            <ul class="header-buttons pull-right list-inline">
                                                                <li><a href="javascript:void(0)" data-dismiss="modal" class="btn btn-sm btn-danger" id="btn-delete"><i class="fa fa-times"></i>&nbsp;Cancel</a></li>
                                                                @*<li>
                                        <a href="javascript:void(0)" class="btn btn-sm btn-success" id="btn-done" data-toggle="modal"
                                           data-backdrop="static" data-target="#modalExtendConfirmation">
                                            <i class="fa fa-check"></i>&nbsp;Done
                                        </a>
                                    </li>*@
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    @*Extend Confirmation*@
                                    <div id="modalExtendConfirmation" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog">
                                        <div class="modal-dialog modal-sm">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h4 class="modal-title" id="myModalLabel2" style="text-align: left">Extend Confirmation</h4>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="form-group">
                                                        You have just extend NuPOS A for more 6 months.<br />
                                                        NuPOS A will be expired after 17/01/2019 - 08:00
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                                                    <button type="button" class="btn btn-primary">OK</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    @*======== End Extend*@

                                    @*======== Detail*@
                                    <div id="content-modal-detail">

                                    </div>
                                    @*======== End Detail*@
                                    @*End Products and Packages Management*@
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    var _tableReceiptHistory = null;
    var _settingsOptionTableReceiptHistory = {
        "columnDefs": [
            { "orderable": false, "targets": [] },
            { "width": "12%", "targets": [2, 3, 4] },
        ],
        "order": [[1, 'desc']],
        "autoWidth": false, /*Feature control DataTables' smart column width handling.*/
        "displayLength": 25,
        //"pagingType": "full_numbers",
        "searching": true,         // txtSearch in filter
        "lengthChange": true,      // Dropdownlist Page
        "bInfo": false,              // text [showing...
        "paging": true           //
    };

    var _tableStoreInfo = null;
    var _settingsOptionTableStoreInfo = {
        "columnDefs": [
            { "orderable": false, "targets": [4] },
            { "width": "12%", "targets": [2, 3,] },
        ],
        "order": [[0, 'asc']],
        "autoWidth": false, /*Feature control DataTables' smart column width handling.*/
        "displayLength": 25,
        //"pagingType": "full_numbers",
        "searching": true,         // txtSearch in filter
        "lengthChange": true,      // Dropdownlist Page
        "bInfo": false,              // text [showing...
        "paging": true           //
    };
    var _displayLength = 5;
    //=============HardwareService
    var _tableHardwareService = null;
    var _settingsOptionTableHardwareService = {
        "columnDefs": [
            { "orderable": false, "targets": [5] },
            { "width": "5%", "targets": [2, 3, 4, 5] },
        ],
        "order": [
            [3, 'asc']
        ],
        "autoWidth": false,
        "displayLength": _displayLength,
        "bInfo": false
    };

    //=============ProductPackage
    var _tableProductPackage = null;
    var _settingsOptionTableProductPackage = {
        "columnDefs": [
            { "orderable": false, "targets": [7] },
            { "width": "8%", "targets": [2, 3, 4, 5, 6] },
            { "width": "3%", "targets": 7 },
        ],
        "order": [
            [4, 'asc']
        ],
        "autoWidth": false,
        "displayLength": _displayLength,
        "bInfo": false
    };

    //=============Account
    var _tableAccount = null;
    var _settingsOptionTableAccount = {
        "columnDefs": [
            { "orderable": false, "targets": [4] },
            { "width": "5%", "targets": [2, 3, 4] },
        ],
        "order": [
            [1, 'asc']
        ],
        "autoWidth": false,
        "displayLength": _displayLength,
        "bInfo": false
    };

    //=============Addition Function
    var _tableAdditionFunction = null;
    var _settingsOptionTableAdditionFunction = {
        "columnDefs": [
            { "orderable": false, "targets": [5] },
            { "width": "5%", "targets": [2, 3, 4, 5] },
        ],
        "order": [
            [2, 'asc']
        ],
        "autoWidth": false,
        "displayLength": _displayLength,
        "bInfo": false
    };

    //=============Composite/Additions
    var _tableCompositeAdditions = null;
    var _settingsOptionTableCompositeAdditions = {
        "columnDefs": [
            { "orderable": false, "targets": [1] },
            { "width": "5%", "targets": [2, 3] },
        ],
        "order": [
            [0, 'asc']
        ],
        "autoWidth": false,
        "displayLength": _displayLength,
        "searching": false,         // txtSearch in filter
        "lengthChange": false,      // Dropdownlist Page
        "bInfo": false              // text [showing...
    };

    //=============DevicesManagement
    var _tableDevicesManagement = null;
    var _settingsOptionTableDevicesManagement = {
        "columnDefs": [
            { "orderable": false, "targets": [4] },
            { "width": "5%", "targets": [2, 3, 4] },
        ],
        "order": [
            [0, 'asc']
        ],
        "autoWidth": false,
        "displayLength": _displayLength,
        "searching": false,         // txtSearch in filter
        "lengthChange": false,      // Dropdownlist Page
        "bInfo": false              // text [showing...
    };

    var _tableApplicableProduct = null;
    var _settingsOptionTableApplicableProduct = {
        "columnDefs": [
               { "orderable": false, "targets": [2] },
               { "width": "25%", "targets": [1] },
               { "width": "10%", "targets": [2] },
        ],
        "order": [[0, 'desc']],
        "autoWidth": false, /*Feature control DataTables' smart column width handling.*/
        //"displayLength": 25,
        //"pagingType": "full_numbers",
        "searching": false,         // txtSearch in filter
        "lengthChange": false,      // Dropdownlist Page
        "bInfo": false,              // text [showing...
        "paging": true           //
    };

    $(document).ready(function (e) {

        _tableReceiptHistory = $('#datatable-responsive-list-receipt-history').DataTable($.extend(true, {}, _settingsOptionTableReceiptHistory));

        _tableStoreInfo = $('#datatable-responsive-list-store-info').DataTable($.extend(true, {}, _settingsOptionTableStoreInfo));

        _tableHardwareService = $('#datatable-responsive-list-hardwares-and-services').DataTable($.extend(true, {}, _settingsOptionTableHardwareService));
        _tableProductPackage = $('#datatable-responsive-list-products-and-packages').DataTable($.extend(true, {}, _settingsOptionTableProductPackage));
        _tableAccount = $('#datatable-responsive-list-accounts').DataTable($.extend(true, {}, _settingsOptionTableAccount));
        _tableAdditionFunction = $('#datatable-responsive-list-additional-functions').DataTable($.extend(true, {}, _settingsOptionTableAdditionFunction));

        _tableCompositeAdditions = $('.datatable-responsive-list-detail').DataTable($.extend(true, {}, _settingsOptionTableCompositeAdditions));
        _tableDevicesManagement = $('#datatable-responsive-list-devices-management').DataTable($.extend(true, {}, _settingsOptionTableDevicesManagement));

        _tableApplicableProduct = $('#datatable-responsive-list-applicable-product').DataTable($.extend(true, {}, _settingsOptionTableApplicableProduct));
       
        /* mark start for secret info */
        var email = $("#txtEmail").html();
        email = email.replace(/\s/g, "");
        email = MarkStart(email, 4, email.length);
        $("#txtEmail").html(email);

        var NRIC = $("#txtNRIC").html();
        NRIC = NRIC.replace(/\s/g, "");
        NRIC = MarkStart(NRIC, 0, NRIC.length - 4);
        $("#txtNRIC").html(NRIC);

        var Phone = $("#txtPhone").html();
        Phone = Phone.replace(/\s/g, "");
        Phone = MarkStart(Phone, 0, Phone.length - 4);
        $("#txtPhone").html(Phone);

        // Not display Merchant & Store, if not data
        if ("@Model.MerchantStore.Name" == "" && "@Model.MerchantStore.Email" == "") {
            $("#myTab li:eq(1)").hide();
        }
    });

    function showreceiptdetail(ID) {
        $('.se-pre-con').show();
        $.ajax({
            url: '@Url.Action("GetDetailReceipt", "CRMCustomers")',
            type: "POST",
            data: { ID: ID},
            dataType:'html',
            //processData: false,
            //contentType: false,
            success: function (data) {
                $('.se-pre-con').hide();
                $("#modelDetail").modal({
                    show: true,
                    backdrop: 'static'
                })
                $(".receiptdetail").html(data);
                $('.clsRefurn').addClass('hidden');
            },
            error: function (jqXHR, textStatus, errorThrown) {
                $('.se-pre-con').hide();
                $(".Show-UserInformation").html(jqXHR.responseText);
            }
        });
    }

    function ShowDetailProductPackageMana(AssetId, CustomerID) {

        $.ajax({
            url: CreateAbsoluteUrl('GetProductDetail'),
            type: "POST",
            data: {
                Id: AssetId,
                CustomerID: CustomerID
            },
            dataType: 'html',
            beforeSend: function () {
                $('.se-pre-con').show();
            },
            complete: function () {
                $('.se-pre-con').hide();
                $('[id=modelDetailProduct]').modal('show');
            },
            success: function (data) {
                $('[id=content-modal-detail]').html(data);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                //alert(jqXHR.statusText);
                $('.se-pre-con').hide();
            }
        });
    }

    function CloseStoreDetail(Id)
    {
        if (Id === "")
            Id = '@_CustomerID';

            $.ajax({
                type: "GET",
                url: "@Url.Action("CloseStoreDetail", "CRMCustomers")",
                traditional: true,
                data: { id: Id, maction : "view"},
                contentType: "application/json; charset=utf-8",
                dataType: "html",
                success: function (data) {
                    $(".detail-view").html(data);
                    $(".detail-view").show();
                    $(".gridview").css("display", "none");
                   // $('#myTab a[href="#tab_content2"]').tab('show');
                },
                beforeSend: function () {
                    $('.se-pre-con').show();
                },
                complete: function () {
                    $('.se-pre-con').hide();
                },
            });
    }

    function ShowModalProductPrice(btn, _ProductID) {
        var tr = $(btn).parents('tr:first');
        var modal = $(tr).find(".modal");
        $(modal).modal({
            keyboard: false,
            show: true,
            //backdrop: false
        });
    }
</script>